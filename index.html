<html>
<head>
	<title>Dana Patrick</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
	<script src="https://unpkg.com/imagesloaded@4.1/imagesloaded.pkgd.min.js"></script>
	<script src="https://unpkg.com/masonry-layout@4.1/dist/masonry.pkgd.min.js"></script>

	<style>
		*{ box-sizing: border-box; }
		.clearfloat{ clear: both; }
		body{ padding: 0; margin: 0; background-color: #FFFFFF; }
		#imgTheatreWrapper{ width: 100%; height: 100%; position: fixed; top: 0; left: 0; padding: 40px; background-color: #444444; }
		#imgTheatre{ background-color: #FFFFFF; position: relative; }
		#imagesList{ height: 100%; width: 410px; position:absolute; left: 0; top: 0; background-color: #FFFFFF; padding: 10px; overflow-y: auto; }
		#mainImgWrapper{ height: 100%; width: 100%; padding-left: 410px; background-color: #000000; }
		#mainImage{ height: 100%; width: 100%; background-image: url('imgs/img1.jpg'); background-size: contain; background-position: center center; background-repeat: no-repeat; }
		.imageListItem{ width: 33.3%; }
		.listImg{ width: 33%; float: left; opacity: 0.65; cursor: pointer; -webkit-transition: opacity 0.2s ease-in-out; -moz-transition: opacity 0.2s ease-in-out; transition: opacity 0.2s ease-in-out; }
		.listImg:hover{ opacity: 1; }
	</style>
</head>
<body>
	<div id="imgTheatreWrapper">
		<div id="imgTheatre">
			<div id="mainImgWrapper">
				<div id="mainImage">
				</div>
			</div>
			<div id="imagesList">
				<div id="masonryWrapper">
				</div>
			</div>
		</div>
	</div>

<script>

	function attachEvents(){
		$("#imagesList").on("click", ".listImg", function(e){
			$("#mainImage").css('background-image', 'url("'+ ($(this).attr("src")) +'")' );
		});
	}
	$(document).ready(function(){
		var imagelistHtml = _.template(
			'<% _.each( _.range(1,175), function(item){ %>'+
				'<img class="listImg" src="imgs/img<%= item %>.jpg" />'+
			'<% }); %>'+
			'<div class="clearfloat"></div>'
		);

		$("#masonryWrapper").html( imagelistHtml() );
		// setTimeout(function(){
		// 	$('#masonryWrapper').masonry({
		// 		itemSelector: '.listImg',
		// 		columnWidth: 130
		// 	});
		// }, 500);

		var $grid = $("#masonryWrapper").masonry({
			itemSelector: '.listImg',
			columnWidth: 130
		});
		$grid.imagesLoaded().progress( function() {
		  $grid.masonry('layout');
		});



		attachEvents();
	});
</script>

</body>
</html>
